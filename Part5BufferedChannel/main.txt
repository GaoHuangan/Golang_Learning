package main

import (

"LearningProject/Part5BufferedChannel"
"sync"
)
/*
ğŸ” ç¨‹åºè§£é‡Šï¼š
éƒ¨åˆ†	è¯´æ˜
make(chan int, 5)	åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º 5 çš„ç¼“å†²é€šé“
ch <- i	ç”Ÿäº§è€…å‘é€šé“ä¸­å†™æ•°æ®
å¦‚æœç¼“å†²åŒºæœªæ»¡	ç”Ÿäº§è€…ä¸ä¼šè¢«é˜»å¡
å¦‚æœç¼“å†²åŒºå·²æ»¡	ç”Ÿäº§è€…å°†è¢«é˜»å¡ï¼Œç›´åˆ°æ¶ˆè´¹è€…è¯»å–ä¸€ä¸ªæ•°æ®
*/
func main() {
	ch:=make(chan int,5)	// Buffered channel with capacity 5
	var wg sync.WaitGroup

	// started producer
	wg.Add(1)
	go func() {
		defer wg.Done()
		Part5BufferedChannel.Producer(ch)
	}()

	// Start 2 independent consumer
	for i := 1; i <= 2; i++ {
		wg.Add(1)
		go func(id int) {
			defer wg.Done()
			Part5BufferedChannel.Consumer(id,ch)
		}(i)
	}

	/*
	âœ… æ”¹è¿›ç‚¹æ€»ç»“ï¼š
    æ”¹è¿›ç‚¹	è¯´æ˜
    æ¯ä¸ªæ¶ˆè´¹è€…éƒ½å•ç‹¬å¼€ goroutine	å®ç°çœŸæ­£çš„å¹¶å‘æ¶ˆè´¹
    for + åŒ¿åå‡½æ•° + å‚æ•°ä¼ é€’	é¿å…é—­åŒ…å˜é‡é™·é˜±ï¼Œç¡®ä¿ id æ­£ç¡®
    wg.Add åªå¯¹å®é™… goroutine æ•°åŠ 	é¿å…å¡æ­»æˆ–æå‰ç»“æŸé—®é¢˜
	*/

	//go func() {
	//	defer wg.Done()
	//	Part5BufferedChannel.Consumer(1,ch)
	//	Part5BufferedChannel.Consumer(2,ch)
	//}()

	wg.Wait()

}